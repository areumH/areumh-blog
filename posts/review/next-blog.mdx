---
title: 'Next.jsë¡œ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° íšŒê³ '
date: '2025-10-21'
description: 'Next.jsì™€ MDXë¥¼ ì´ìš©í•œ ë¸”ë¡œê·¸ ë§Œë“¤ê¸°'
tags: ['Next.js', 'MDX', 'ë¸”ë¡œê·¸']
---

í•­í•´ ë¶€íŠ¸ìº í”„ë¥¼ ìˆ˜ë£Œí•œ í›„ ì°¸ì—¬í•œ ìŠ¤í„°ë””ì¸ **2ì£¼ ë§Œì— ë¸”ë¡œê·¸ ë§Œë“¤ê¸°** ì— ëŒ€í•œ íšŒê³ ...
í¬ê²Œ ë‚´ê°€ ê³ ë¯¼í–ˆë˜ ë¶€ë¶„ë“¤, ë§‰í˜”ë˜ ë¶€ë¶„ë“¤ ìœ„ì£¼ë¡œ ì‘ì„±í•´ë³´ë ¤ê³  í•œë‹¤!!

## ğŸ“ MDX ê¸€ ë¶ˆëŸ¬ì˜¤ê¸°

ê°œì¸ ë¸”ë¡œê·¸ ê¸€ í¬ìŠ¤íŒ… í•˜ëŠ” ë°©ë²•ìœ¼ë¡œ ë…¸ì…˜ì—ì„œ ë¶ˆëŸ¬ì˜¤ê¸°, mdx íŒŒì¼ë¡œ ì‘ì„±í•˜ê¸° ë“±ì´ ìˆì—ˆëŠ”ë°, í‰ì†Œì— ë…¸ì…˜ì„ ì‚¬ìš©í•˜ì§€ ì•Šê¸°ë„ í•˜ê³  ë¸”ë¡œê·¸ ê´€ë ¨ìœ¼ë¡œëŠ” ë ˆí¬ì§€í† ë¦¬ í•˜ë‚˜ë¡œ ëë‚´ê³  ì‹¶ì–´ì„œ mdx íŒŒì¼ì„ ì‚¬ìš©í•˜ê¸°ë¡œ ê²°ì •í–ˆë‹¤!

### ì¹´í…Œê³ ë¦¬ë³„ ê¸€ ì‘ì„±í•˜ê¸°

```
areumh-blog/
â”œâ”€â”€ app/             # Next.js App Router í˜ì´ì§€
â”‚   â”œâ”€â”€ category/    # ì¹´í…Œê³ ë¦¬ í˜ì´ì§€
â”‚   â”œâ”€â”€ post/        # ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ ìƒì„¸ í˜ì´ì§€
â”‚   â””â”€â”€ portfolio/   # í¬íŠ¸í´ë¦¬ì˜¤ í˜ì´ì§€
â”œâ”€â”€ components/      # ê³µí†µ ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ layout/      # ë ˆì´ì•„ì›ƒ ì»´í¬ë„ŒíŠ¸
â”‚   â””â”€â”€ ui/          # ui ì»´í¬ë„ŒíŠ¸
â”œâ”€â”€ hooks/           # ì»¤ìŠ¤í…€ í›…
â”œâ”€â”€ lib/             # ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ ê´€ë ¨ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
â”œâ”€â”€ posts/           # ì¹´í…Œê³ ë¦¬ë³„ MDX ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ íŒŒì¼
â”œâ”€â”€ public/          # ì •ì  íŒŒì¼
â”œâ”€â”€ styles/          # ì „ì—­ ìŠ¤íƒ€ì¼
â”œâ”€â”€ utils/           # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
â”œâ”€â”€ constants.ts     # ìƒìˆ˜ ì •ì˜
â””â”€â”€ types.ts         # íƒ€ì… ì •ì˜
```

ë£¨íŠ¸ í´ë”ì— `posts`ë¼ëŠ” í´ë”ë¥¼ ìƒì„±í•œ í›„, ì¹´í…Œê³ ë¦¬ëª…ìœ¼ë¡œ í´ë”ë¥¼ ìƒì„±í•œ ë’¤ `mdx` íŒŒì¼ì„ ì‘ì„±í•˜ì—¬ ë¸”ë¡œê·¸ ê¸€ì„ ì¶”ê°€í•˜ë„ë¡ í–ˆë‹¤.

```typescript
// constants.ts
export const CATEGORIES = [
  { key: 'ê°œë°œ', label: 'tech' },
  { key: 'íšŒê³ ', label: 'review' },
];

// app/category/page.tsx
export default function Category() {
  return (
    <div className="flex flex-col items-center gap-10 md:px-10 py-3 md:py-5">
      {CATEGORIES.map(({ key, label }) => (
        <CategoryPostList key={key} category={label} />
      ))}
    </div>
  );
}
```

**ì¹´í…Œê³ ë¦¬**ëŠ” ê°œë°œê³¼ íšŒê³  ì™¸ì—ëŠ” ë”±íˆ ì‘ì„±í•  ê²ƒ ê°™ì§„ ì•Šê³ ... ë” ì¶”ê°€í•œë‹¤ê³  í•´ë„ ê¸€ì„ ì‘ì„±í•  ë•Œ ê°™ì´ ìˆ˜ì •í•˜ë©´ ê·¸ë§Œì´ë¼ ìƒìˆ˜ íŒŒì¼ì— ì •ì˜í•´ë‘ì—ˆê³ , ì¹´í…Œê³ ë¦¬ëª…ì„ ì¸ìë¡œ ë°›ì•„ í•´ë‹¹ ì¹´í…Œê³ ë¦¬ì˜ ê¸€ ëª©ë¡ì„ ë³´ì—¬ì£¼ëŠ” `CategoryList` ì»´í¬ë„ŒíŠ¸ì— ì—°ê²°í•´ì£¼ì—ˆë‹¤.

```typescript
import fs from 'fs';
import path from 'path';
import matter from 'gray-matter';
import { Post } from '@/types';

const postsDirectory = path.join(process.cwd(), 'posts');

/**
 * ëª¨ë“  slug ê°€ì ¸ì˜¤ê¸°
 * category - í´ë”ëª…, slug - íŒŒì¼ëª…
 */
export function getPostSlugs(): string[] {
  const categories = fs.readdirSync(postsDirectory).filter((name) => {
    const categoryPath = path.join(postsDirectory, name);
    return fs.statSync(categoryPath).isDirectory();
  });

  const slugs: string[] = [];

  categories.forEach((category) => {
    const files = fs.readdirSync(path.join(postsDirectory, category));
    files.forEach((file) => {
      if (file.endsWith('.mdx')) {
        const slug = path.basename(file, '.mdx');
        slugs.push(`${category}/${slug}`);
      }
    });
  });

  return slugs;
}
```

`process.cwd()`ëŠ” í˜„ì¬ í”„ë¡œì íŠ¸ì˜ ë£¨íŠ¸ ê²½ë¡œì´ê³ , `posts`ëŠ” ë¸”ë¡œê·¸ì˜ ê¸€ì´ ë‹´ê¸´ í´ë”ëª…ìœ¼ë¡œ **postsDirectory**ëŠ” `ë£¨íŠ¸ í´ë”/posts`ê°€ ëœë‹¤.

`fs.readdirSync()`ëŠ” í•´ë‹¹ í´ë” ì•ˆì˜ ëª¨ë“  íŒŒì¼/í´ë” ì´ë¦„ì„ ë™ê¸°ì ìœ¼ë¡œ ê°€ì ¸ì˜¨ë‹¤. `fs.statSync()`ëŠ” í•´ë‹¹ ê²½ë¡œì˜ íŒŒì¼ ìƒíƒœ ì •ë³´ë¥¼ ë‹´ì€ `fs.Stats` ê°ì²´ë¥¼ ë°˜í™˜í•˜ê³ , `isDirectory()`ëŠ” ê·¸ ê²½ë¡œê°€ ë””ë ‰í„°ë¦¬ì¸ì§€ ì•„ë‹Œì§€ë¥¼ ì•Œë ¤ì¤€ë‹¤.

ë”°ë¼ì„œ filterëŠ” ëª¨ë“  íŒŒì¼/í´ë”ì˜ ì´ë¦„ ì¤‘ í´ë”ì˜ ì´ë¦„ë§Œ ê±¸ëŸ¬ì£¼ê¸° ë•Œë¬¸ì— categoriesëŠ” **ì¹´í…Œê³ ë¦¬ í´ë”ëª…ë§Œ ë‹´ê³ ìˆëŠ” ë°°ì—´ì„ ë¦¬í„´**í•œë‹¤.

ê·¸ë¦¬ê³  ì¹´í…Œê³ ë¦¬ í´ë” ë‚´ë¶€ë¥¼ íƒìƒ‰í•˜ì—¬ `.mdx` íŒŒì¼ë§Œ í•„í„°ë§í•˜ê³ , `path.basename(file, '.mdx')`ë¥¼ í†µí•´ í™•ì¥ìë¥¼ ì œê±°í•œë‹¤. ì´ëŸ° ê³¼ì •ì„ í†µí•´ ìœ„ì˜ í•¨ìˆ˜ëŠ” **`ì¹´í…Œê³ ë¦¬ëª…/ìŠ¬ëŸ¬ê·¸`ì˜ ë¬¸ìì—´ ë°°ì—´ì„ ë¦¬í„´**í•œë‹¤!

### gray-matterë¡œ ë©”íƒ€ë°ì´í„° ë¶„ë¦¬í•˜ê¸°

```typescript
/**
 * íŠ¹ì • slugì˜ post ê°€ì ¸ì˜¤ê¸°
 */
export function getPostBySlug(url: string) {
  const [category, slug] = url.split('/');
  const fullPath = path.join(postsDirectory, category, `${slug}.mdx`);
  const fileContents = fs.readFileSync(fullPath, 'utf8');

  const { data, content } = matter(fileContents);

  const meta: Post = {
    title: data.title,
    date: data.date,
    description: data.description,
    tags: data.tags || [],
    slug,
    category,
  };

  return { meta, content };
}
```

`gray-matter` ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ matter í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë©´ **mdx íŒŒì¼ì˜ ìƒë‹¨ ë©”íƒ€ë°ì´í„°ì™€ ë³¸ë¬¸ì„ ë¶„ë¦¬**í•  ìˆ˜ ìˆë‹¤.

```typescript
---
title: "Next.jsë¡œ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° íšŒê³ "
date: "2025-10-21"
description: "Next.jsì™€ MDXë¥¼ ì´ìš©í•œ ë¸”ë¡œê·¸ ë§Œë“¤ê¸°"
tags: ["Next.js", "MDX", "ë¸”ë¡œê·¸"]
---

ë¸”ë¡œê·¸ ë³¸ë¬¸ ë‚´ìš©
```

mdx íŒŒì¼ì´ ìœ„ì™€ ê°™ì´ ìƒê²¼ë‹¤ë©´ gray-matterì€ ì´ë¥¼ ì•„ë˜ì™€ ê°™ì´ ë°˜í™˜í•œë‹¤.

```typescript
{
  data: {
    title: "Next.jsë¡œ ë¸”ë¡œê·¸ ë§Œë“¤ê¸° íšŒê³ ",
    date: "2025-10-21",
    description: "Next.jsì™€ MDXë¥¼ ì´ìš©í•œ ë¸”ë¡œê·¸ ë§Œë“¤ê¸°",
    tags: ["Next.js", "MDX", "ë¸”ë¡œê·¸"]
  },
  content: "ë¸”ë¡œê·¸ ë³¸ë¬¸ ë‚´ìš©"
}
```

ì´ data ê°ì²´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ Postë¼ëŠ” íƒ€ì…ì„ ë”°ë¡œ ì •ì˜í•˜ì—¬ ì¹´í…Œê³ ë¦¬ì™€ ìŠ¬ëŸ¬ê·¸ ê°’ì„ í¬í•¨í•˜ë„ë¡ í–ˆê³ , ë¸”ë¡œê·¸ ë³¸ë¬¸ì˜ í—¤ë”ì— í•´ë‹¹ ë°ì´í„°ë¥¼ ì‚¬ìš©í–ˆë‹¤.

### ì „ì²´ ê¸€ / ì¹´í…Œê³ ë¦¬ë³„ ê¸€ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°

```typescript
/**
 * ì „ì²´ ê¸€ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°
 */
export function getAllPosts(): Post[] {
  const slugs = getPostSlugs();
  return slugs.map((slug) => getPostBySlug(slug).meta).sort((a, b) => (a.date < b.date ? 1 : -1)); // ìµœì‹ ìˆœ
}
```

ë¸”ë¡œê·¸ì˜ í™ˆ í™”ë©´ì—ì„œëŠ” ì¹´í…Œê³ ë¦¬ì— ìƒê´€ì—†ì´ ëª¨ë“  ê¸€ë“¤ì„ í•œë²ˆì— ë³´ì—¬ì£¼ë„ë¡ í–ˆê¸° ë•Œë¬¸ì— ìœ„ì— ì‘ì„±í–ˆë˜ í•¨ìˆ˜ë“¤ì„ ì‚¬ìš©í•˜ì—¬ ëª¨ë“  ê¸€ì˜ ë©”íƒ€ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•˜ê³  ì´ë¥¼ ìµœì‹ ìˆœìœ¼ë¡œ ì •ë ¬í•œ ë°°ì—´ì„ ë¦¬í„´í•˜ê²Œ í–ˆë‹¤!

<br />

```typescript
/**
 * ì¹´í…Œê³ ë¦¬ë³„ ê¸€ ê°€ì ¸ì˜¤ê¸°
 */
export function getPostsByCategory(category: string): Post[] {
  return getAllPosts().filter((post) => post.category === category);
}
```

ê·¸ë¦¬ê³  ì¹´í…Œê³ ë¦¬ í˜ì´ì§€ì—ì„œëŠ” ì¹´í…Œê³ ë¦¬ë³„ ê¸€ ëª©ë¡ì„ ê°€ì ¸ì˜¤ê¸° ë•Œë¬¸ì— ì¹´í…Œê³ ë¦¬ ë¬¸ìì—´ì„ ì¸ìë¡œ ë°›ê³  í•´ë‹¹ ì¹´í…Œê³ ë¦¬ì˜ ê¸€ ëª©ë¡ì„ ë¦¬í„´í•˜ëŠ” í•¨ìˆ˜ë¥¼ ì‘ì„±í–ˆë‹¤.

### íƒœê·¸ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°

```typescript
/**
 * ì „ì²´ íƒœê·¸ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°
 */
export function getAllTags(): string[] {
  const posts = getAllPosts();
  const tags = posts.flatMap((post) => post.tags || []);
  return Array.from(new Set(tags));
}
```

í™ˆ í™”ë©´ì—ì„œ íƒœê·¸ë³„ ê¸€ ëª©ë¡ í™•ì¸ì´ ê°€ëŠ¥í•˜ë„ë¡ í•˜ê¸° ìœ„í•´ ì¤‘ë³µì„ ì œê±°í•œ íƒœê·¸ ëª©ë¡ì„ ë¦¬í„´í•˜ëŠ” í•¨ìˆ˜ë„ ì‘ì„±í–ˆë‹¤.

### paramsì™€ Suspenseì˜ ë¹„ë™ê¸° ì²˜ë¦¬

Next 15 ë¶€í„°ëŠ” paramsëŠ” ë™ê¸°ê°€ ì•„ë‹Œ **ë¹„ë™ê¸°ì‹ìœ¼ë¡œ ì ‘ê·¼**í•˜ë„ë¡ ë³€ê²½ë˜ì—ˆë‹¤.
ì¦‰, ë¼ìš°íŠ¸ íŒŒë¼ë¯¸í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ê³¼ì •ì„ `await` ì²˜ë¦¬í•´ì•¼ í•œë‹¤.

> 1. ë¸Œë¼ìš°ì €ì—ì„œ `/post/review/next-blog` ì™€ ê°™ì€ urlì— ì ‘ê·¼
> 2. `[category]/[slug]` ì— í•´ë‹¹í•˜ëŠ” ë™ì  íŒŒë¼ë¯¸í„° ì¶”ì¶œ - ì„œë²„ ì»´í¬ë„ŒíŠ¸ì—ì„œ paramsë¡œ ì œê³µ (Promise í˜•íƒœ)
> 3. `await params`ë¡œ ì‹¤ì œ ê°ì²´ `{ category, slug }` ë¡œ ë³€í™˜

```typescript
export default async function Post({ params }: { params: Promise<{ category: string; slug: string }> }) {
  const { category, slug } = await params;
  const { meta, content } = getPostBySlug(`${category}/${slug}`);

  // ...
}
```

ìœ„ì˜ ì½”ë“œì²˜ëŸ¼ paramsì˜ íƒ€ì…ì„ `Promise<{ category: string; slug: string }>` í˜•íƒœë¡œ ì„ ì–¸í•˜ê³ , í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ `await`ìœ¼ë¡œ ê°’ì„ êº¼ë‚´ëŠ” ë°©ì‹ìœ¼ë¡œ ì‘ì„±í•˜ì—¬ mdx íŒŒì¼ì˜ ê¸€ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ë„ë¡ í–ˆë‹¤ ğŸ‘

<br />

```typescript
export default function Home() {
  const posts = getAllPosts();
  const tags = getAllTags();

  return (
    <div className="flex flex-col w-full max-w-[800px] mx-auto items-center md:px-10">
      <Suspense fallback={null}>
        <HomeContent posts={posts} tags={tags} />
      </Suspense>
    </div>
  );
}
```

ì¶”ê°€ë¡œ React 18 ì´í›„ë¶€í„°ëŠ” `useSearchParams()`ë¥¼ ì‚¬ìš©í•˜ëŠ” í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ë¥¼ ë°ì´í„°ê°€ ì¤€ë¹„ë  ë•Œê¹Œì§€ ì•ˆì „í•˜ê²Œ ë Œë”ë§ë˜ë„ë¡ **`Suspense`ë¡œ ê°ì‹¸ëŠ” ì²˜ë¦¬**ê°€ í•„ìš”í•˜ë‹¤.

`fallback`ì€ ë°ì´í„°ê°€ ë¡œë”© ì¤‘ì¼ ë•Œ ë³´ì—¬ì£¼ëŠ” uië¥¼ ì§€ì •í•˜ëŠ” ì†ì„±ì¸ë°, ì´ë²ˆ í”„ë¡œì íŠ¸ëŠ” í˜ì´ì§€ê°€ ë³µì¡í•˜ì§€ ì•Šê³  êµ³ì´ ë¡œë”© ìƒíƒœ uiê°€ í•„ìš”í•˜ë‹¤ê³  ëŠê»´ì§€ì§€ ì•Šì•„ null ê°’ì„ ë„£ì–´ ì²˜ë¦¬í–ˆë‹¤. ğŸ« 

## ğŸ¨ MDX ê¸€ ìŠ¤íƒ€ì¼ë§

### next-mdx-remoteë¡œ ê¸€ ë Œë”ë§í•˜ê¸°

mdxì˜ ë¸”ë¡œê·¸ ê¸€ì„ í™”ë©´ì— ë Œë”ë§í•˜ê¸° ìœ„í•´ `next-mdx-remote`ì™€ ì—¬ëŸ¬ í”ŒëŸ¬ê·¸ì¸ì„ í™œìš©í–ˆë‹¤.

```typescript
import { MDXRemote } from 'next-mdx-remote/rsc';
import rehypePrettyCode from 'rehype-pretty-code';
import rehypeSlug from 'rehype-slug';
import remarkGfm from 'remark-gfm';
import remarkBreaks from 'remark-breaks';

export default async function PostContent({ content }: { content: string }) {
  return (
    <div className="prose prose-sm md:prose-lg dark:prose-invert">
      <MDXRemote
        source={content}
        options={{
          mdxOptions: {
            remarkPlugins: [remarkGfm, remarkBreaks],
            rehypePlugins: [rehypeSlug, rehypePrettyCode],
          },
        }}
      />
    </div>
  );
}
```

- **remarkGfm**: GitHub ìŠ¤íƒ€ì¼ ë§ˆí¬ë‹¤ìš´ í™•ì¥(GFM) ì ìš©
- **remarkBreaks**: ì¤„ë°”ê¿ˆ ì‹œ `<br>` ì²˜ë¦¬
- **rehypeSlug**: ê° í—¤ë”©ì— ìë™ìœ¼ë¡œ id ë¶€ì—¬ â†’ ëª©ì°¨(TOC)ì™€ ì—°ê²°
- **rehypePrettyCode**: ì½”ë“œ ë¸”ë¡ í•˜ì´ë¼ì´íŒ… ì ìš©

<br />

```typescript
// styles/globals.css ì¤‘ ì¼ë¶€
@import 'tailwindcss';
@plugin "@tailwindcss/typography";

/* prose ë¬¸ë‹¨ ê°„ê²© ì¡°ì • */
.prose p {
  margin-top: 0.5rem;
  margin-bottom: 0.5rem;
}

.prose h1,
.prose h2,
.prose h3,
.prose h4,
.prose h5,
.prose h6 {
  margin-top: 1rem;
  margin-bottom: 1rem;
}

.prose ul,
.prose li,
.prose ol {
  margin-top: 0.5rem;
  margin-bottom: 0.5rem;
}

/* ì¸ìš©êµ¬ */
.prose blockquote {
  border-left: 4px solid #6366f1;
  padding: 0.5rem;
  color: #374151;
  font-style: normal;
  margin-top: 1rem;
  margin-bottom: 1rem;
  background-color: #f9fafb;
}

/* ë‹¤í¬ëª¨ë“œ ëŒ€ì‘ */
.dark .prose blockquote {
  color: #e5e7eb;
  background-color: #1f2937;
}

/* ì½”ë“œ ë¸”ë¡ ìŠ¤íƒ€ì¼ */
pre {
  padding: 1rem;
  border-radius: 0.5rem;
  overflow-x: auto;
  margin: 0.5rem 0;
}

code {
  font-family: 'Courier New', Courier, monospace;
  font-size: 0.75rem;
}

@media (min-width: 768px) {
  code {
    font-size: 0.875rem;
  }
}

// ...
```

globals.css íŒŒì¼ì˜ ìƒë‹¨ì— `@plugin "@tailwindcss/typography";`ë¥¼ ì¶”ê°€í•˜ì—¬ [**prose**](https://v1.tailwindcss.com/docs/typography-plugin) í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•œ ì»¨í…ì¸ ì— ìŠ¤íƒ€ì¼ì´ ì ìš©ë˜ë„ë¡ í–ˆë‹¤. ê·¸ë¦¬ê³  ê°ì¢… íƒœê·¸ë“¤ê³¼ ì¸ìš©êµ¬, ì½”ë“œ ë¸”ë¡ ë“±ì— ì ìš©í•  ìŠ¤íƒ€ì¼ë“¤ì„ ì§ì ‘ ì‘ì„±í–ˆë‹¤. ğŸ–Œï¸

## ğŸ“ TOC ì»´í¬ë„ŒíŠ¸ êµ¬í˜„

ë¸”ë¡œê·¸ ê¸€ì˜ í—¤ë”© (h1, h2, h3)ì„ ê¸°ë°˜ìœ¼ë¡œ ë™ì ì¸ ëª©ì°¨ë¥¼ ì œê³µí•˜ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ì§ì ‘ êµ¬í˜„í•´ë³´ì•˜ë‹¤.

### ê¸€ì˜ ëª¨ë“  í—¤ë”© ê°€ì ¸ì˜¤ê¸°

```typescript
useEffect(() => {
  const headingElements = Array.from(document.querySelectorAll('h1, h2, h3')) as HTMLElement[];

  const newHeadings = headingElements.map((el) => ({
    id: el.id,
    text: el.innerText,
    level: Number(el.tagName.replace('H', '')),
  }));

  setHeadings(newHeadings);
}, []);
```

`useEffect`ë¥¼ ì‚¬ìš©í•˜ì—¬ ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì‹œ DOMì—ì„œ ëª¨ë“  h1, h2, h3 ìš”ì†Œë¥¼ ê°€ì ¸ì˜¨ë‹¤. ê·¸ë¦¬ê³  ê° í—¤ë”©ì˜ id, í…ìŠ¤íŠ¸, ë ˆë²¨(h1ì¼ ê²½ìš° 1, h2ì¼ ê²½ìš° 2 ...)ì„ ì¶”ì¶œí•˜ì—¬ ìƒíƒœì— ì €ì¥í•œë‹¤.

### IntersectionObserverë¡œ í˜„ì¬ í™”ë©´ ìœ„ì¹˜ ê°ì§€

```typescript
const observer = new IntersectionObserver(
  (entries) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        setCurrentId(entry.target.id);
      }
    });
  },
  { rootMargin: '0px 0px -80% 0px' }
);
```

- **entries**: ê´€ì°° ëŒ€ìƒ ìš”ì†Œë“¤ì˜ ìƒíƒœ ë°°ì—´ (í—¤ë”©)
- **entry.isIntersecting**: í•´ë‹¹ ìš”ì†Œê°€ ë·°í¬íŠ¸ì— ë³´ì´ê³  ìˆëŠ”ì§€ì— ëŒ€í•œ boolean ê°’
- **entry.target.id**: ê´€ì°° ì¤‘ì¸ DOM ìš”ì†Œì˜ id ê°’
- **rootMargin**: ê´€ì°° ì˜ì—­(ë·°í¬íŠ¸)ì— ì—¬ë°± ì„¤ì •
  (bottom: -80% â†’ í™”ë©´ ì•„ë˜ìª½ 80% ì§€ì ì—ì„œ ìš”ì†Œê°€ ë“¤ì–´ì˜¤ë©´ ê°ì§€)

### observer ë“±ë¡

```typescript
const elements = document.querySelectorAll('h1, h2, h3');
elements.forEach((el) => observer.observe(el));
```

`observer.observe(el)`ë¡œ ê° í—¤ë”©ì„ ê´€ì°° ëŒ€ìƒìœ¼ë¡œ ë“±ë¡í•˜ê³ , í•´ë‹¹ ìš”ì†Œê°€ í™”ë©´ì— ë“¤ì–´ì˜¤ê±°ë‚˜ ë‚˜ê°ˆ ë•Œ ë¸Œë¼ìš°ì €ê°€ ì½œë°± í•¨ìˆ˜ë¥¼ ìë™ìœ¼ë¡œ í˜¸ì¶œí•˜ë„ë¡ êµ¬í˜„í–ˆë‹¤.

### í—¤ë”© ìŠ¤íƒ€ì¼ë§

```typescript
const getHeadingMargin = (level: number): string => {
  const indentClass = {
    1: 'ml-0',
    2: 'ml-3',
    3: 'ml-6',
  } as const;

  return indentClass[level as keyof typeof indentClass] ?? 'ml-0';
};

// ...

return (
  <nav className="flex pr-2 text-sm">
    <ul className="space-y-1">
      {headings.map((heading) => {
        return (
          <li
            key={heading.id}
            className={`${getHeadingMargin(heading.level)} ${
              currentId === heading.id ? 'text-indigo-400 font-semibold' : 'text-gray-400'
            } transition-colors`}
          >
            <a href={`#${heading.id}`}>{heading.text}</a>
          </li>
        );
      })}
    </ul>
  </nav>
);
```

í—¤ë”© ë ˆë²¨ì— ë”°ë¼ TOC ë‚´ì— ë“¤ì—¬ì“°ê¸° ìŠ¤íƒ€ì¼ì„ ì ìš©í•˜ê¸° ìœ„í•œ í•¨ìˆ˜ë¥¼ ë”°ë¡œ ì‘ì„±í•´ì£¼ì—ˆê³ , í˜„ì¬ í™”ë©´ì— í‘œì‹œëœ í—¤ë”©ì˜ í…ìŠ¤íŠ¸ ìƒ‰ìƒì„ ê°•ì¡°í•˜ë„ë¡ í–ˆë‹¤.

```typescript
html {
  scroll-behavior: smooth;
}
```

ì¶”ê°€ë¡œ css íŒŒì¼ì— ìœ„ì˜ ì½”ë“œë¥¼ ì¶”ê°€í•˜ë©´ í—¤ë”© í´ë¦­ ì‹œ ì• ë‹ˆë©”ì´ì…˜ì²˜ëŸ¼ ë¶€ë“œëŸ½ê²Œ ìŠ¤í¬ë¡¤ì´ ì´ë™ëœë‹¤. í•˜ì§€ë§Œ Next.jsëŠ” ë¼ìš°íŠ¸ ì „í™˜ ì‹œ ìŠ¤í¬ë¡¤ ë™ì‘ì„ ì œì–´í•˜ê¸° ìœ„í•´ **data-scroll-behavior ì†ì„±**ì„ í™•ì¸í•˜ê¸° ë•Œë¬¸ì— í•˜ë‚˜ì˜ í˜ì´ì§€ ë‚´ì—ì„œ ìŠ¤í¬ë¡¤ì´ ì´ë™ë  ë•ŒëŠ” smooth, ë¼ìš°íŠ¸ ì „í™˜ ì‹œì—” autoë¡œ ì„ì‹œ ë³€ê²½ (ì¦‰ì‹œ ìŠ¤í¬ë¡¤) ë˜ë„ë¡ html íƒœê·¸ì— ì†ì„± ê°’ì„ ì¶”ê°€í•´ì•¼í•œë‹¤. í•˜ì§€ ì•Šìœ¼ë©´ ê²½ê³ ë¬¸ì´ ëœ¬ë‹¤ ğŸ¤•

<br />

```typescript
export default function RootLayout({
  children,
}: Readonly<{
  children: React.ReactNode;
}>) {
  return (
    <html lang="en" data-scroll-behavior="smooth" suppressHydrationWarning> // âœ…
      <body className="flex flex-col min-h-screen">
        <ThemeProvider attribute="class" defaultTheme="system" enableSystem>
          <Header />
          <main className="flex flex-col flex-grow w-full mx-auto px-7 md:px-20 py-5 md:py-8">{children}</main>
          <Footer />
        </ThemeProvider>
      </body>
    </html>
  );
}
```

**`data-scroll-behavior="smooth"`** ì½”ë“œë¥¼ ì¶”ê°€í•˜ì—¬ í•´ê²°í–ˆë‹¤!

## ğŸŒ™ ë‹¤í¬ëª¨ë“œ êµ¬í˜„

Tailwind CSS v4ë¶€í„°ëŠ” ë‹¤í¬ëª¨ë“œ ì„¤ì • ë°©ì‹ì´ ë°”ë€Œì–´ì„œ globals.css íŒŒì¼ì— ì•„ë˜ì˜ ì½”ë“œê°€ í•„ìˆ˜ë¡œ ë“¤ì–´ê°€ì•¼ í•œë‹¤.

```typescript
@custom-variant dark (&:where(.dark, .dark *));
```

ìœ„ì˜ ì½”ë“œê°€ ìˆì–´ì•¼ `.dark` í´ë˜ìŠ¤ê°€ ë¶™ì€ ìš”ì†Œì™€ ê·¸ í•˜ìœ„ ìš”ì†Œì— `dark:` ìŠ¤íƒ€ì¼ì´ ì ìš©ëœë‹¤!

### next-themes ì„¤ì •

```typescript
// components/ui/ThemeToggle.tsx
import { Sun, Moon } from 'lucide-react';
import { useTheme } from 'next-themes';

export default function ThemeToggle() {
  const { resolvedTheme, setTheme } = useTheme();

  const handleTheme = () => {
    setTheme(resolvedTheme === 'dark' ? 'light' : 'dark');
  };

  return (
    <button
      className="relative flex w-7 h-7 md:w-8 md:h-8 rounded-full justify-center items-center hover:bg-gray-200 dark:hover:bg-gray-700 cursor-pointer"
      onClick={handleTheme}
    >
      <Sun className="w-5 h-5 md:w-6 md:h-6 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0" />
      <Moon className="w-5 h-5 md:w-6 md:h-6 absolute rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100" />
    </button>
  );
}
```

`next-themes`ì˜ **useTheme** í›…ìœ¼ë¡œ í˜„ì¬ì˜ í…Œë§ˆ ìƒíƒœë¥¼ ê°€ì ¸ì˜¤ê³ , **í˜„ì¬ ì ìš©ëœ ì‹¤ì œ í…Œë§ˆ ê°’**ì¸ **`resolvedTheme`** ê°’ì„ ê¸°ë°˜ìœ¼ë¡œ í…Œë§ˆë¥¼ ë³€ê²½í•˜ëŠ” **setTheme** í•¨ìˆ˜ë¥¼ í† ê¸€ ì»´í¬ë„ŒíŠ¸ì— ì—°ê²°í•´ì£¼ì—ˆë‹¤.

<br />

```typescript
import type { Metadata } from 'next';
import { ThemeProvider } from 'next-themes';
import Header from '@/components/layout/Header';
import Footer from '@/components/layout/Footer';
import '@/styles/globals.css';

// ...

export default function RootLayout({
  children,
}: Readonly<{
  children: React.ReactNode;
}>) {
  return (
    <html lang="en" suppressHydrationWarning>
      <body className="flex flex-col min-h-screen">
        <ThemeProvider attribute="class" defaultTheme="system" enableSystem> // âœ…
          <Header />
          <main className="flex flex-col flex-grow w-full mx-auto px-7 md:px-20 py-5 md:py-8">{children}</main>
          <Footer />
        </ThemeProvider>
      </body>
    </html>
  );
}
```

ê·¸ë¦¬ê³  ë£¨íŠ¸ ë ˆì´ì•„ì›ƒì— `ThemeProvider`ë¥¼ ì¶”ê°€í•˜ì—¬ ì „ì—­ì—ì„œ ë‹¤í¬ëª¨ë“œ í† ê¸€ì´ ê°€ëŠ¥í•˜ë„ë¡ í–ˆë‹¤ ğŸŒ™

### suppressHydrationWarning ì²˜ë¦¬

Next.jsëŠ” **SSR(Server-Side Rendering)** ë°©ì‹ì„ ì‚¬ìš©í•œë‹¤.

> 1. ì„œë²„ì—ì„œ HTMLì„ ë¨¼ì € ìƒì„±
> 2. ë¸Œë¼ìš°ì €ê°€ HTMLì„ ë°›ì•„ í™”ë©´ì— í‘œì‹œ
> 3. Reactê°€ hydration -> JSë¥¼ ì—°ê²°í•˜ì—¬ ì¸í„°ë ‰í‹°ë¸Œí•˜ê²Œ ë§Œë“¦

ê·¸ë¡œ ì¸í•´ ë‹¤í¬ëª¨ë“œë¥¼ êµ¬í˜„í•  ë•Œ ì„œë²„ëŠ” ì‚¬ìš©ìì˜ í…Œë§ˆ ì„¤ì •ì„ ëª¨ë¥´ê¸° ë•Œë¬¸ì— ê¸°ë³¸ ê°’ ê¸°ì¤€ìœ¼ë¡œ HTMLì„ ìƒì„±í•˜ê³ , í•˜ì´ë“œë ˆì´ì…˜ ê³¼ì • ì¤‘ `next-themes`ë¥¼ í†µí•´ ì‹¤ì œë¡œ ì‚¬ìš©ìê°€ ì„¤ì •í•œ í…Œë§ˆ ê°’ì„ ì½ê²Œ ë˜ì–´ ì´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ DOMì„ ì—…ë°ì´íŠ¸í•˜ì—¬ í•˜ì´ë“œë ˆì´ì…˜ ë¶ˆì¼ì¹˜ ë¬¸ì œê°€ ë°œìƒí•œë‹¤.

```typescript
export default function RootLayout({
  children,
}: Readonly<{
  children: React.ReactNode;
}>) {
  return (
    <html lang="en" data-scroll-behavior="smooth" suppressHydrationWarning> // âœ…
      <body className="flex flex-col min-h-screen">
        <ThemeProvider attribute="class" defaultTheme="system" enableSystem>
          <Header />
          <main className="flex flex-col flex-grow w-full mx-auto px-7 md:px-20 py-5 md:py-8">{children}</main>
          <Footer />
        </ThemeProvider>
      </body>
    </html>
  );
}
```

ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ë£¨íŠ¸ ë ˆì´ì•„ì›ƒì˜ html íƒœê·¸ì— í•˜ì´ë“œë ˆì´ì…˜ ë¶ˆì¼ì¹˜ ê²½ê³ ë¥¼ í—ˆìš©í•˜ëŠ” **suppressHydrationWarning** ì†ì„±ì„ ì¶”ê°€í–ˆë‹¤.

---

> [ë¸”ë¡œê·¸ ë°”ë¡œê°€ê¸°](https://areumh.me/) | [ê¹ƒí—ˆë¸Œ ë°”ë¡œê°€ê¸°](https://github.com/areumH/areumh-blog)
